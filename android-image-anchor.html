<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Diag AR</title>
<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
<style>
  body{margin:0;font-family:system-ui,Arial}
  #log{position:fixed;inset:0;padding:12px;white-space:pre-wrap;overflow:auto}
  .ui{position:fixed;left:0;right:0;bottom:12px;display:flex;gap:8px;justify-content:center}
  .ui button{padding:10px 14px;border:none;border-radius:10px;color:#fff}
  #start{background:#2563eb}
</style>
</head>
<body>
<div id="log">Vérification du support AR…</div>
<div class="ui"><button id="start">Démarrer AR</button></div>

<a-scene id="scene" vr-mode-ui="enabled:false" webxr="requiredFeatures: local">
  <a-camera look-controls="enabled:true"></a-camera>
</a-scene>

<script>
(async () => {
  const log = (m)=>document.getElementById('log').textContent += '\n' + m;
  const ok = !!navigator.xr;
  log('navigator.xr: ' + ok);
  if (!ok){ log('➡️ WebXR indisponible (met à jour Chrome).'); return; }
  const sup = await navigator.xr.isSessionSupported('immersive-ar');
  log('immersive-ar support ? ' + sup);
  if (!sup){ log('➡️ AR non dispo : mets à jour "Google Play Services for AR" + redémarre.'); }

  document.getElementById('start').onclick = ()=> {
    document.getElementById('scene').enterVR();
    log('➡️ Tentative de démarrage AR (enterVR)…');
  };
})();
</script>
</body>
</html>
